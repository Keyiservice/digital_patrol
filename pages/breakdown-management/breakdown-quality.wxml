<custom-header />
<view class="container">
  <!-- 页面标题 -->
  <view class="page-title">
    <text class="title-text">BREAKDOWN RECORD</text>
    <text class="sub-title-text">质量验证</text>
  </view>

  <scroll-view scroll-y="true" enhanced="true" show-scrollbar="true" bounces="true" class="form-container">
    <!-- 故障和维修信息展示 -->
    <view class="info-section">
      <view class="section-title">故障与维修信息</view>
      <view class="info-item">
        <text class="info-label">报修人员:</text>
        <text class="info-value">{{recordDetail.reporter || '-'}}</text>
      </view>
      <view class="info-item">
        <text class="info-label">设备/项目:</text>
        <text class="info-value">{{recordDetail.deviceType || '-'}} / {{recordDetail.project || '-'}}</text>
      </view>
      <view class="info-item">
        <text class="info-label">故障描述:</text>
        <text class="info-value">{{recordDetail.faultDescription || '-'}}</text>
      </view>
      <view class="info-item">
        <text class="info-label">故障位置:</text>
        <text class="info-value">{{recordDetail.faultLocation || '-'}}</text>
      </view>
      <view class="info-item">
        <text class="info-label">维修结果:</text>
        <text class="info-value">{{recordDetail.repairResult || '-'}}</text>
      </view>
      <view class="info-item">
        <text class="info-label">维修人员:</text>
        <text class="info-value">{{recordDetail.repairer || '-'}}</text>
      </view>
    </view>

    <!-- 质量验证表单 -->
    <view class="form-section">
      <view class="section-title">质量验证信息</view>

      <!-- 检查内容 -->
      <view class="form-item description-item">
        <text class="form-label">检查内容:</text>
        <textarea class="form-textarea" placeholder="请输入检查内容" value="{{inspectionContent}}" bindinput="onInspectionContentInput"></textarea>
      </view>
      
      <!-- 检查结果 -->
      <view class="form-item description-item">
        <text class="form-label">检查结果:</text>
        <textarea class="form-textarea" placeholder="请输入检查结果" value="{{inspectionResult}}" bindinput="onInspectionResultInput"></textarea>
      </view>
      
      <!-- 首件条码 -->
      <view class="form-item">
        <text class="form-label">首件条码:</text>
        <input class="form-input" value="{{firstPieceBarcode}}" placeholder="请输入首件条码" bindinput="onFirstPieceBarcodeInput" />
      </view>
      
      <!-- 照片 -->
      <view class="form-item photos-section">
        <text class="form-label">照片:</text>
        <view class="photos-container">
          <view class="photo-list">
            <view wx:for="{{photos}}" wx:key="index" class="photo-item">
              <image class="photo-preview" src="{{item}}" mode="aspectFill" bindtap="onPreviewPhoto" data-index="{{index}}" binderror="onImageError"></image>
              <view class="delete-btn" catchtap="onDeletePhoto" data-index="{{index}}">×</view>
            </view>
            <view wx:if="{{photos.length < 9}}" class="add-photo-btn" bindtap="onAddPhoto">
              <text class="add-icon">+</text>
            </view>
          </view>
        </view>
      </view>
      
      <!-- 检验人员 -->
      <view class="form-item">
        <text class="form-label">检验人员:</text>
        <input class="form-input disabled" disabled value="{{inspector}}" placeholder="自动获取登录人员" />
      </view>
      
      <!-- 检验日期 -->
      <view class="form-item">
        <text class="form-label">检验日期:</text>
        <view class="form-input disabled">{{inspectionDate}}</view>
      </view>
      
      <!-- 检验时间 -->
      <view class="form-item">
        <text class="form-label">检验时间:</text>
        <view class="form-input disabled">{{inspectionTime}}</view>
      </view>
    </view>
    
    <!-- 底部间距 -->
    <view style="height: 120rpx;"></view>
  </scroll-view>
  
  <!-- 底部按钮 -->
  <view class="bottom-section">
    <button class="nav-btn cancel-btn" bindtap="onBack">返回</button>
    <button class="nav-btn save-btn" bindtap="onSave">提交验证</button>
  </view>
</view> 